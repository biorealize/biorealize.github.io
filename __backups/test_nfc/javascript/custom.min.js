"use strict";var pubnub=new PubNub({subscribeKey:"sub-c-0b2aaa44-a779-11e6-be20-0619f8945a4f",publishKey:"pub-c-722b1270-6c2b-423d-98f6-cb21c18a2265"});jQuery(document).ready(function(u){pubnub.subscribe({channels:["NFC_TAG_CLIENT"]}),pubnub.addListener({message:function(e){var i=e.channel;console.log("message came in: ",e),console.log(i),u("#log").append("<p>"+JSON.stringify(e.message)+"</p>"),"get"==e.message.type&&u("#json_received").val(JSON.stringify(e.message.tag))}}),u("input[name=media_type]").click(function(e){var i=u(e.currentTarget);i.is(":checked")&&("media_type_solid"==i.attr("id")?(u("#peripheral_type_group, #sealed_row").show(),u(".liquid_input").hide(),a(),u(".plate").filter(function(e,i){return u(i).is(":visible")}).find("input").eq(0).focus()):(u("#peripheral_type_group, .form-row.plate, #sealed_row").hide(),u(".liquid_input").show()))});var a=function(){if(u(".form-row.plate").hide(),u("#media_type_solid").is(":checked")){var e=u("#peripheral_type").val();u("#"+e).show()}};u("#peripheral_type").change(a).change(),u("#submit_nfc_form").submit(function(e){e.preventDefault();for(var i={},a=u(e.currentTarget),t=["id","client","location","start_time","expiration_date","duration","target_temperature","imaging_frequency","peripheral_payload"],n=0;n<t.length;n++)i[t[n]]=a.find("#"+t[n]).val();if("solid"==a.find("input[name=media_type]:checked").val()){i.media_type="solid",i.peripheral_type=a.find("#peripheral_type").val();var r={};a.find(".form-row.plate:visible").find("table").find("tr").each(function(e,i){var a=String.fromCharCode(65+e);u(i).find("td").each(function(e,i){r[a+e]=u(i).find("input[type=text]").val()})}),i.load=r,i.sealed="true"==a.find("input[name=sealed]:checked").val()}else i.media_type="liquid",i.syringe=a.find("#syringe").val();u("#json_sent").val(JSON.stringify(i)),sendTag(i)}),u("#request_nfc_form").submit(function(e){e.preventDefault(),retrieveTag(u("#request_id").val())})});var $c=function(e){console.log(e)},config=function(){var e={};return""==window.location.hostname?e.apiUrl="http://localhost:4001":e.apiUrl="http://18.191.34.33:4000",e},sendTag=function(e){var i={cmnd:"ADD_NFC",data:e};pubnub.publish({message:i,channel:"SERVER",meta:getMeta()})},retrieveTag=function(e){var i={cmnd:"GET_NFC",data:e};pubnub.publish({message:i,channel:"SERVER",meta:getMeta()})},getMeta=function(){return{uuid:pubnub.getUUID(),v:1}};
//# sourceMappingURL=maps/custom.min.js.map
