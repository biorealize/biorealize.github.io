"use strict";var pubnub=new PubNub({subscribeKey:"sub-c-0b2aaa44-a779-11e6-be20-0619f8945a4f",publishKey:"pub-c-722b1270-6c2b-423d-98f6-cb21c18a2265"});jQuery(document).ready(function(s){pubnub.subscribe({channels:["NFC_TAG_CLIENT"]}),pubnub.addListener({message:function(e){var n=e.channel;console.log("message came in: ",e),console.log(n),s("#log").append("<p>"+JSON.stringify(e.message)+"</p>"),"get"==e.message.type&&s("#json_received").val(JSON.stringify(e.message.tag))}}),s("input[name=media_type]").click(function(e){var n=s(e.currentTarget);n.is(":checked")&&("media_type_solid"==n.attr("id")?(s("#peripheral_type_group, #sealed_row").show(),s("#syringe_group").hide(),t(),s(".plate").filter(function(e,n){return s(n).is(":visible")}).find("input").eq(0).focus()):(s("#peripheral_type_group, .form-row.plate, #sealed_row").hide(),s("#syringe_group").show()))});var t=function(){if(s(".form-row.plate").hide(),s("#media_type_solid").is(":checked")){var e=s("#peripheral_type").val();s("#"+e).show()}};s("#peripheral_type").change(t).change(),s("#submit_nfc_form").submit(function(e){e.preventDefault();for(var n={},t=s(e.currentTarget),a=["id","client","location","start_time","duration","target_temperature","imaging_frequency"],i=0;i<a.length;i++)n[a[i]]=t.find("#"+a[i]).val();if("solid"==t.find("input[name=media_type]:checked").val()){n.peripheral_type=t.find("#peripheral_type").val();var r={};t.find(".form-row.plate:visible").find("table").find("tr").each(function(e,n){var t=String.fromCharCode(65+e);s(n).find("td").each(function(e,n){r[t+e]=s(n).find("input[type=text]").val()})}),n.load=r,n.sealed="true"==t.find("input[name=sealed]:checked").val()}else n.syringe=t.find("#syringe").val();s("#json_sent").val(JSON.stringify(n)),sendTag(n)}),s("#request_nfc_form").submit(function(e){e.preventDefault(),retrieveTag(s("#request_id").val())})});var $c=function(e){console.log(e)},config=function(){var e={};return""==window.location.hostname?e.apiUrl="http://localhost:4001":e.apiUrl="http://18.191.34.33:4000",e},sendTag=function(e){var n={cmnd:"ADD_NFC",data:e};pubnub.publish({message:n,channel:"SERVER",meta:getMeta()})},retrieveTag=function(e){var n={cmnd:"GET_NFC",data:e};pubnub.publish({message:n,channel:"SERVER",meta:getMeta()})},getMeta=function(){return{uuid:pubnub.getUUID(),v:1}};
//# sourceMappingURL=maps/custom.min.js.map
